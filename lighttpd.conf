server.modules = (
  "mod_access",
  "mod_accesslog",
  "mod_alias",
  "mod_cgi",
  "mod_dirlisting",
  "mod_staticfile"
)

# Listen on all interfaces, port 80 (change if you want 80)
server.bind = "0.0.0.0"
server.port = 80

# Document root (set below via envsubst-like sed)
server.document-root = "/storage/SD"

# Index files and optional directory listing
index-file.names = ( "index.html", "index.htm", "index.py" )
dir-listing.activate = "enable"

server.upload-dirs = ( "/data/local/tmp" )

# Logs & pid
server.errorlog = "/data/local/lighttpd.error.log"
accesslog.filename = "/data/local/lighttpd.access.log"
server.pid-file = "/data/local/lighttpd.pid"

# Donâ€™t chroot; keep user as root so it can read /storage/* (many Android mounts restrict other uids)
#server.username = "root"
#server.groupname = "root"

# MIME
mimetype.assign = ( ".html" => "text/html",
                    ".htm"  => "text/html",
                    ".css"  => "text/css",
                    ".js"   => "application/javascript",
                    ".png"  => "image/png",
                    ".jpg"  => "image/jpeg",
                    ".jpeg" => "image/jpeg",
                    ".gif"  => "image/gif",
                    ".svg"  => "image/svg+xml",
                    ".txt"  => "text/plain",
                    ".json" => "application/json" )

# Enable Python CGI for .py
cgi.assign = ( ".py" => "/data/data/com.termux/files/usr/bin/python3" )

# Security/CGI tweaks
# Require execute bit on scripts (recommended). Ensure your .py files are +x.
cgi.execute-x-only = "enable"

# Reduce verbose dir-listing info
server.dir-listing = "enable"
server.max-keep-alive-requests = 4
